<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2016-06-14 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ValueListService - About</title>
<style type="text/css" media="all">
@import url("./css/maven-base.css");
@import url("./css/maven-theme.css");
@import url("./css/site.css");
</style>
<link rel="stylesheet" href="./css/print.css" type="text/css"media="print" />
<meta name="Date-Revision-yyyymmdd" content="20160614" />
<meta http-equiv="Content-Language" content="en" />

</head>
<body class="composite" ng-app="ValueListPageManager">
<div ng-controller="PageManagerController">
	<div id="banner">
		<div id="bannerLeft">valuelistservice</div>
		<div class="clear">
			<hr />
		</div>
	</div>
	<div id="breadcrumbs">

		<div class="xleft">
			<span id="publishDate">Last Published: 2016-06-14</span> &nbsp;| <span
				id="projectVersion">Version: 0.0.1-SNAPSHOT</span>
		</div>
		<div class="xright">
			<a href="./" title="valuelistservice">valuelistservice</a>


		</div>
		<div class="clear">
			<hr />
		</div>
	</div>
	<div id="leftColumn">
		<div id="navcolumn">


			<h5>Project Documentation</h5>
			<ul>
				<li class="expanded"><a href="project-info.html"
					title="Project Information">Project Information</a>
					<ul>
						<li class="none"><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
						<li class="none"><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
						<li class="none"><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
						<li class="none"><strong>About</strong></li>
						<li class="none"><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
						<li class="none"><a href="plugins.html" title="Plugins">Plugins</a></li>
						<li class="none"><a href="project-summary.html" title="Summary">Summary</a></li>
					</ul>
				</li>
				<li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
			</ul>
			<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"> <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>


		</div>
	</div>
	<div id="bodyColumn">
		<div id="contentBox">
			<div class="section">
				<h2>
					Getting Started with ValueListService
					|<a href="http://ryanp102694.github.io/valuelistservice/apidocs/index.html">JavaDocs</a>
					|<a href="https://github.com/ryanp102694/valuelistservice">Code</a>
				</h2>
				<a name="About_valuelistservice"></a>
				<p>
					<h2 class="table_of_contents">Table of Contents</h2>
				</p>
				<ul class="nav_options">
				  <li><a ng-click="currentPageName = 'ProjectOverview'">Project Overview</a></li>
				  <li><a ng-click="currentPageName = 'InterfaceOverview'">Interface Overview</a></li>
				  <li>Quick Start
				  	<ul>
				  		<li><a ng-click="currentPageName = 'UsingDefaultImplementations'">Using Default Implementations</a></li>
				  		<li><a ng-click="currentPageName = 'PagingResults'">Paging Results</a></li>
				  		<li><a ng-click="currentPageName = 'ComplexQueries'">Complex Queries</a></li>
				  		<li><a ng-click="currentPageName = 'ConfiguringAdapterConversionService'">Configuring the AdapterConversionService</a></li>
				  		<li><a ng-click="currentPageName = 'FurtherExtension'">Further Extension</a></li>
				  	</ul>
				  </li>
				  <li><a ng-click="currentPageName = 'UsingInSpringMVC'">Using in Spring MVC</a></li>
				  <li><a ng-click="currentPageName = 'CreatingAngularFrontEnd'">Creating an Angular Front End using valuelist.js</a></li>
				  
				</ul>
					<div ng-hide="currentPageName != 'ProjectOverview'">
						<p>
						<h1 id="project_overview">
							<strong>Project Overview</strong>
						</h1>
						</p>
						<p>The idea of ValueListService is simple.</p>
						<ol>
							<li>Configure in XML SQL queries to run.</li>
							<li>Send HTTP request and get query results in JSON.</li>
						</ol>
						<p>
							The <em>valuelistservice.jar</em> provides a flexible framework to
							support queries to filter, sort, and page through large result sets.
						</p>
						<div class="next_footer" ng-click="currentPageName = 'InterfaceOverview'">
							InterfaceOverview
						</div>
					</div>
					<div ng-hide="currentPageName != 'InterfaceOverview'">
					<p>
						<h1 id="interface_overview">
						    <strong>Interface Overview</strong>
						</h1>
						</p>
						<p>
						    The <strong>ValueListService</strong> interface is very simple, it
						    contains one method to get back a <strong>Values</strong> object which
						    holds results.
						</p>
						<div class="code">
						    <img src="images/valuelistservice_interface.jpg" alt="ValueListService Interface" style="height: 80px;" />
						</div>
						<p>The intention of these parameters is the following.</p>
						<ol>
						    <li><strong>key:</strong> Used to identify a query which the
						        ValueListService is capable of running.
						    </li>
						    <li><strong>queryParams: </strong>Parameters used to by the query
						        specified by
						    </li>
						    <li><strong>pagingInfo: </strong>An object which encapsulates
						        requested page, and number of items per page for specified query.
						        (This can be left null if paging is not necessary)
						     </li>
						</ol>
						<p>
						    The method returns <strong>Values&lt;? extends Object&gt;</strong>.
						    Let&rsquo;s break that down.
						</p>
						<div class="code">
						    <img src="images/values.jpg" alt="Values" />
						</div>
						<p>As you can see, a Values is nothing more than a List and paging
						    information, which tells the client the total number of items, page,
						    and items per page. &nbsp;
						</p>
						<div class="back_footer" ng-click="currentPageName = 'ProjectOverview'">
						    Project Overview
						</div>
						<div class="next_footer"
						     ng-click="currentPageName = 'UsingDefaultImplementations'">Using
						    Default Implementations
						</div>
					</div>
					<div ng-hide="currentPageName != 'UsingDefaultImplementations'">
					<p>
						<h1><strong>Using Default Implementations</strong></h1>
					</p>
					<p>
						The <strong>DefaultValuesListService&lt;T&gt; </strong>is a simple
						implementation of <strong>ValueListService</strong>. The default
						service takes advantage of another interface, <strong>DataAdapter&lt;T&gt;</strong>.
						Essentially the default service has a map of adapters, which are
						accessible by the query key mentioned earlier. The adapters are
						actually what run the queries, and return the appropriate type
						to the service.
					</p>
					<p>
						Let&rsquo;s take a look at <strong>DataAdapter&lt;T&gt;.</strong>
					</p>
					<div class="code">
						<img src="images/dataadapter.jpg" alt="DataAdapter Interface"/>
					</div>				
					<p>
						Here we can see that the adapter returns the same type as the
						service does, in fact, the method is almost exactly the same as
						the service method, except that the <strong>key </strong>parameter
						is removed.
					</p>
					<p>
						The intention of a <strong>DataAdapter&lt;T&gt; </strong>implementation
						is to be able to allow different queries to return different
						types, as well as different queries to connect to different data
						sources. For example, we could have a <em>FileSystemDataAdapter</em>,
						<em>JdbcDataAdapter</em>, or even <em>MongoDBDataAdapter</em>.
					</p>
					<p>
						In fact, valueslistservice.jar includes a JDBC adapter, <strong>DefaultJdbcDataAdapter</strong>.
						Let&rsquo;s see how we can easily configure this in Spring to read
						data from a MySQL database.
					</p>
					<h3><strong>1. Configure a DataSource</strong></h3>
						<div class="code">
							<img src="images/datasource_config.jpg" alt="DataSource Config"/>
						</div>						
					<h3><strong>2. Configure DefaultJdbcAdapter</strong></h3>
					<p>Here I will be querying a sample MySQL table for employee
						department names.</p>
						<div class="code">
							<img src="images/jdbcadapter_config.jpg" alt="DefaultJdbcAdapter Config" style="height: 150px;"/>
						</div>					
					<h3><strong>3. Call standalone adapter</strong></h3>
					<p>
						You can use adapters apart from the service if you wish, in the
						following example program, we see our adapter query method
						producing the expected results. By default the results are of the
						type List&lt;Map&lt;String,Object&gt;&gt; due to Spring&rsquo;s <strong>ColumnMapRowMapper</strong>.
						Optionally, a <strong>RowMapper</strong>&lt;T&gt; can be injected
						into the adapter to return a different type.
					</p>
					<div class="code">
						<img src="images/example_main.jpg" alt="ValueListService Interface" style="height: 200px;"/>
					</div>					
					<p>&nbsp;</p>
					<h3><strong>4. Inject adapter into default ValueListService</strong></h3>
					<p>
						Ultimately, we will want to use the service, rather than the
						standalone adapter. The <strong>DefaultValueListService </strong>can
						be configured with the following XML. Like the example Main class above, we can
						get our valueListService bean, and call getValuesList to get our results.
					</p>
					<div class="code">
						<img src="images/valuelistservice_config.jpg" alt="ValueListService Interface"/>
					</div>					
					<p>Additional adapters can be injected into the map, which are
						able to be accessed by key in the actual service.</p>
					<p>&nbsp;</p>
					<div class="back_footer" ng-click="currentPageName = 'InterfaceOverview'">
						Interface Overview
					</div>
					<div class="next_footer" ng-click="currentPageName = 'PagingResults'">
						Paging Results
					</div>
					</div>
					<div ng-hide="currentPageName != 'PagingResults'">
					<p>
						<h3 id="paging_results"><strong>Paging</strong></h3>
					</p>
					<p>
						Some result sets will be extremely large. The user may want only
						the first 1000 results, but they likely want to know the total
						number of results that match their query. By passing a <strong>PagingInfo
						</strong>object to our service, the adapter will correctly paginate our
						query. Since we are using MySQL, we inject <strong>MySQLPagingSupport
						</strong>into our adapter. When finished, the adapter configuration will
						look like this:
					</p>
					<div class="code">
						<img src="images/paging_config.jpg" alt="ValueListService Interface" style="height:150px;"/>
					</div>				
					<p>
						Now, we can create a <strong>PagingInfo </strong>object, set the <em>numberPerPage</em>
						property, and the <em>page</em> property, and pass it to the
						service. The result will only show the correct information for the
						selected page.
					</p>
					<div class="back_footer" ng-click="currentPageName = 'UsingDefaultImplementations'">
						Using Default Implementations
					</div>
					<div class="next_footer" ng-click="currentPageName = 'ComplexQueries'">
						Complex Queries
					</div>
					</div>
					<div ng-hide="currentPageName != 'ComplexQueries'"/>
					<p>
						<h3 id="complex_queries"><strong>Complex Queries</strong></h3>
					</p>
					<p>
						By default, the <strong>DefaultJdbcDataAdapter </strong>will use a
						<strong>VelocityQueryParameterMapper </strong>to pre-process any
						of the SQL that is run by Spring on the database. This allows the
						user to write the SQL as a velocity template, knowing that
						Velocity will attempt to map the parameters to the SQL.
					</p>
					<p>
						Let&rsquo;s write a query that takes advantage of velocity, as
						well as the <strong>NamedParameterJdbcTemplate</strong>.						
					</p>
					<div class="code">
						<img src="images/velocity_config.jpg" alt="ValueListService Interface" style="height:60px;"/>
					</div>					
					<p>&nbsp;</p>
					<p>Suppose we pass in a map with our parameters which includes
						(&ldquo;dept_name&rdquo;, &ldquo;Customer Service&rdquo;).</p>
					<p>Two things will happen before the SQL is actually run.</p>
					<ol>
						<li>Velocity will process the SQL, transforming it into: <strong><code>SELECT * FROM employees.departments WHERE dept_name = :dept_name</code></strong></li>
					</ol>
					
					<ol start="2">
						<li>The Spring template will insert the value of the parameter in place of &lt;:dept_name&gt; The final query becomes:<code><strong>SELECT * FROM employees.departments WHERE dept_name = &ldquo;Customer Service&rdquo;</code></strong></li>
					</ol>
					<p>
						<strong>Using Velocity templating allows the defined
							queries to be flexible and allow filtering and sorting based on
							the existence of certain parameters.</strong>
					</p>
					<div class="back_footer" ng-click="currentPageName = 'PagingResults'">
						Paging Results
					</div>
					<div class="next_footer" ng-click="currentPageName = 'ConfiguringAdapterConversionService'">
						Configuring the AdapterConversionService
					</div>
					</div>
					
					<div ng-hide="currentPageName != 'ConfiguringAdapterConversionService'">
				</p>
				<h3 id="configuring_adapterconversionservice"><strong>Configuring the AdapterConversionService</strong></h3>
				<p>
					When using <strong>ValueListService </strong>in a web service, a
					problem arises. <strong>Query parameters in an
					HttpServletRequest are Strings! </strong>What does this mean when we need
					to pass a date in a format like &ldquo;1994-10-27&rdquo;? After
					all, Spring needs a java.util.Date to run the correct SQL query.
				</p>
				<p>
					The <strong>DefaultJdbcDataAdapter </strong>has a property <strong>AdapterConversionService</strong>.
					When configured, the adapter will convert parameters from one type
					to another, based on the adapter requirements.
				</p>
				<div class="code">
					<img src="images/adapterconversion_interface.jpg" alt="ValueListService Interface" style="height: 75px"/>
				</div>
				<p>&nbsp;</p>
				<p>
					&nbsp;By default, the adapter uses <strong>ParameterConversionService</strong>,
					which extends Spring <strong>DefaultConversionService</strong>. <strong>ParameterConversionService
				</strong>has a Map&lt;String,Class&gt;, as well as a list of <strong>Converter</strong>
					objects. When the <strong>ParameterConversionService </strong>calls
					its implemented method, it checks to see if the name of the
					parameter is in its map, if it is, it will use a <strong>Converter</strong>
					from its registry to attempt to convert the parameter value to the
					target class type.
				</p>
				<p>
					<strong>NOTE: </strong> ParameterConversionService will throw unchecked exceptions if 
					there is a conversion error, we will talk about this later.
				</p>
				<p>&nbsp;</p>
				<p>
					Let&rsquo;s see an example of how to configure this. Here is the
					configuration for a <strong>ParameterConversionService </strong>bean.
				</p>
				<div class="code">
					<img src="images/adapterconversion_config.jpg" alt="Adapter Conversion Config" style="height:385px;"/>
				</div>
				<p>
					Here we can see that we have set up query parameter maps with keys
					&ldquo;birth_date&rdquo; or &ldquo;hire_date&rdquo; to have their
					values converted to java.util.Date. We have also implemented
					Spring&rsquo;s <strong>Converter&lt;S,T&gt; </strong>interface in
					the <strong>DefaultStringToDateConverter </strong>class. This
					converter is then added to the conversion service&rsquo;s list of
					converters. This bean will be injected into the adapter&rsquo;s
					adapterConversionService property.
				</p>
				<p>
					<strong>Note:</strong> Spring&rsquo;s MapFactoryBean and
					ListFactoryBean can be set up as parent-child beans, so that their
					lists and maps inherit values. This is useful if a global type
					conversion map or converters list must be configured.
				</p>
				<p>Our adapter can now convert parameters from one type to another in order to run its query.</p>
					<div class="back_footer" ng-click="currentPageName = 'ComplexQueries'">
						Complex Queries
					</div>
					<div class="next_footer" ng-click="currentPageName = 'FurtherExtension'">
						Further Extension
					</div>
				</div>
				<div ng-hide="currentPageName != 'FurtherExtension'">
					<p>
						<h3 id="further_extension"><strong>Further Extension</strong></h3>
					</p>
					<p>
						If necessary, classes can be written which build upon the existing
						interfaces. For example, if a user wishes to not use Velocity
						templating. They could create a class which implements <strong>QueryParameterMapper</strong>,
						and inject that into the adapter. Or suppose Microsoft SQL Server
						is being used. It may be necessary to implement the <strong>SQLPagingSupport
						</strong>interface to support paging.
					</p>
					<p>
						The user could also choose to create their own DataAdapters, and wire them into their service.
					</p>
					<p>&nbsp;</p>
					<div class="back_footer" ng-click="currentPageName = 'ConfiguringAdapterConversionService'">
						Configuring the AdapterConversionService
					</div>
					<div class="next_footer" ng-click="currentPageName = 'UsingInSpringMVC'">
						Using In Spring MVC
					</div>
					</div>
					<div ng-hide="currentPageName != 'UsingInSpringMVC'">
					<p>
						<h1 id="using_in_webservice"><strong>Using ValueListService in a Spring MVC Project</strong></h1>
					</p>
					<p>The original purpose of this project was to get JSON
						results. An example of this being done is in a <a href="https://github.com/ryanp102694/valuelistservice_webservice/commits?author=ryanp102694">Spring MVC</a> project
						with Jackson JSON processing.
					</p>
					<p>
						Let&rsquo;s take a look at our <strong>ValueListServiceController</strong>,
						which is in the <strong>valuelistservice.jar</strong>.
					</p>
					<div class="code">
						<img src="images/valuelistservice_controller.jpg" alt="ValueListServiceController" style="height:350px;"/>
					</div>
					<p>&nbsp;</p>
					<p>Basically, this is what is going on here.</p>
					<ol>
						<li>The <strong>ValueListService</strong> is injected into
							the controller using the @Autowired annotation. The service is
							defined in a Spring xml file.
						</li>
						<li>Parameters are taken from the request and put into a
							parameter map.
						</li>
						<li>A <strong>PagingInfo </strong>object is constructed from
							specific parameters <em>page </em>and <em>numberPerPage</em>.
						</li>
						<li><strong>ValueListService </strong>is called, getting the
							Values. The Values are then marshalled to JSON by the Jackson
							library, before being sent in the response body.
						</li>
					</ol>
				<p>
					In order for this to work, the jar must be put in a Spring project which uses the component-scan and annotation-driven xml.
					Note that one of the base-packages being scanned must be com.pelletier, which is the package for the controller.
				</p>
				<p>
					&lt;context:component-scan base-package="com.pelletier"/&gt;<br>
					&lt;mvc:annotation-driven/&gt;
				</p>
				<p>
					<strong>NOTE: </strong> Query parameter "valueListQuery" is necessary to select a query from 
					the configured map of queries in <strong>DefaultValueListService</strong>. Also in order for paging to work,
					parameters "page" and "numberPerPage" are required.
				</p>
				<h3><strong>Calling the Web Service</strong></h3>
				<p>
					A simple curl command can call the webservice. An example of this would be the following.
				</p>
				<p>
					<code>
					curl -X GET -H "Cache-Control: no-cache" "http://localhost:8080/valueslistservice/values?valueListQuery=query&page=1&numberPerPage=10"
					</code>
				</p>
				<p>
					The response should be whatever Java objects the service returns, serialized into JSON.
				</p>
				<h3><strong>Handling Errors</strong></h3>
				<p>
					Before, we mentioned how the <strong>ParameterConversionService</strong> can throw runtime exceptions.
					The <strong>ParameterConversionService</strong> specifically will throw <strong>ConversionException</strong>.
					What happens when one of these exceptions is thrown? What happens if a different type of exception is thrown,
					for example, some sort of SQL exception?
				</p>
				<p>
					The following exception handlers will catch any exceptions thrown from within the controller.
				</p>
				<div class="code">
					<img src="images/exception_handlers.JPG" alt="Exception Handlers" style="height:425px;"/>
				</div>
				<p>
					Here, you can see there are two exception handlers. Both of these return <strong>Maps</strong>.
					These maps contain information about exceptions that were thrown in the controller. The reason for maps
					being returned is that they provide a natural structure for JSON objects, which are easy to use on the front end.
					These maps will contain exception messages, and potentially a more user-friendly message as well.
				</p>
				<p>
					Note that the top handler specifically catches <strong>ConvertionExceptions</strong> which wrap multiple exceptions.
					The reason for this is because, if multiple exceptions are thrown in conversions, the client needs to know all of the
					conversion errors. Conveniently, there will be an entry in the topmost level map for the parameter that could not be converted.
					The second level map will contain a simple_message entry, and an exception_message entry. The simple_message holds a user friendly message,
					while the exception_message will hold the exceptions actual message.
					The bottom handler will catch any other exceptions that are thrown in the controller, and return a similar object. 				
				</p>
					<div class="back_footer" ng-click="currentPageName = 'FurtherExtension'">
						Further Extension
					</div>
					<div class="next_footer" ng-click="currentPageName = 'CreatingAngularFrontEnd'">
						Creating an Angular Front End using valuelist.js
					</div>
				</div>
				<div ng-hide="currentPageName != 'CreatingAngularFrontEnd'">
					<h1><strong>Creating an Angular Front End using valuelist.js</strong></h1>
					<p>
						The valuelistservice.jar is really nice. It allows you to specify queries in XML for a service, then 
						call that service to get the results. Its even better when valuelistservice is used inside of a Spring MVC app,
						then you can get nice JSON responses over the web for your queries. 
					</p>
					<p>
					<strong>Note: </strong>This was built for Angular 1.X
					</p>
					<p>
						One of the most popular front-end frameworks currently available is AngularJS. Fortunately, an Angular module,
						specifically made with valuelistservice in mind, is available. Lets see how we can use valuelist.js in an Angular project
						to quickly build a front end for our Java valuelistservice.
					</p>
					<h3><strong>Using the plain valueListService to get data.</strong></h3>
					<p>
						Full code for this example can be found <a href="">here</a>.
					</p>
					<p>
						First, you will need to download valuelist.js, which can be found <a href="https://github.com/ryanp102694/valuelistservice_demo">here</a>.
					</p>
					<p>
						Create an html file, and import the Angular and valuelist scripts.
						<div class="code">
							<pre>
								<code>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;valuelist.js - example&lt;/title&gt;
        &lt;script src=&quot;js/angular.min.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/valuelist.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;

    &lt;/body&gt;
&lt;/html&gt;
								</code>
							</pre>
						</div>
						<p>
							Next, we will create our app.js file and inject the valuelist module.
						</p>
						<p>
							<div class="code">
								<code>
									angular.module('ValueListDemo',['valueList']);
								</code>
							</div>
						</p>
						<p>
							Now we can include app.js in our html page, and use the ng-app attribute on the body element to initialize our angular app.
						</p>
						<p>
							<div class="code">
								<pre>
									<code>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;valuelist.js - example&lt;/title&gt;
        &lt;script src=&quot;js/angular.min.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/valuelist.js&quot;&gt;&lt;/script&gt;
        &lt;script src = &quot;js/app.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body ng-app=&quot;ValueListDemo&quot;&gt;

    &lt;/body&gt;
&lt;/html&gt;
									</code>
								</pre>
							</div>
						</p>
						<p>
							The valuelist module must be configured with a base url. This will be the url which maps to the controller
							where the Java service is running. Lets create a file called valuelist_config.js, and put the following configuration inside of it.
							<strong>You will also need to include this file in the html page after valuelist.js</strong>
						</p>
						<div class="code">
							<pre>
								<code>
angular.module('valueList').config(function(valueListServiceProvider){
    valueListServiceProvider.setBaseUrl("http://localhost:8080/valueslistservice/values");
});								
								</code>
							</pre>
						</div>
						<p>
							Now that we have the valuelist module injected, and the provider configured, lets create a controller
							and inject our valueListService into it. Lets also call the service and add the data to our controller $scope.
							Put the following code into MainController.js.
						</p>
						<div class="code">
							<pre>
								<code>
angular.module('ValueListDemo').controller('MainController',function($scope,valueListService){

    var params = {
        valueListQuery: "query",
        page: 1,
        numberPerPage: 15
    };

    valueListService.getValues(params).then(function(data){
        $scope.results = JSON.stringify(data);
    })
});
								
								</code>
							</pre>
						</div>
						<p>
							Note what is happening above in <strong>MainController.js</strong>. First, we create an object called params, which will
							be used to create the url for the http call to the Java service. Next, we call getValues from the service, and set the JSON serialized
							result to our $scope.results object.
						</p>
						<p>
							In order to see these results on our page, add the MainController.js file to the html page after app.js, and inside the body element,
							insert the following html.
						</p>
						<p>
							<div class="code"ng-non-bindable>
								<pre>
									<code>
&lt;div ng-controller=&quot;MainController&quot;&gt;
      {{results}}
&lt;/div&gt;									
									</code>
								</pre>
							</div>
						</p>
						<p>
							You should see the JSON response from the service. This includes the values that were returned, as well as the valuesInfo, which is paging information.
						</p>
						<h3><strong>Using the ValueListServiceController</strong></h3>
						<p>
							Full code for this example can be found <a href="">here</a>.
						</p>
						<p>
							The valuelist.js module comes with <strong>ValueListServiceController</strong>, this controller supports using
							the service with common features such as pagination, sorting, and is particularly useful for creating table views.
						</p>
						<p>
							Lets see an example of this. We will start with the following html file. Make sure all of the script tags are including the files.
							Also make sure that <strong>app.js</strong> is injecting the 'valuelist' into your app's module, as in the above example.
						</p>
						<p>
							<div class="code">
								<pre>
									<code>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;valuelist.js - example&lt;/title&gt;
        &lt;script src=&quot;js/angular.min.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/valuelist.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/valuelist_config.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/app.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body ng-app=&quot;ValueListDemo&quot;&gt;
        &lt;div ng-controller=&quot;ValueListServiceController&quot;&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
									</code>
								</pre>
							</div>
						</p>
						<p>
							Since we aren't writing our own controller like in the first example, we will need to configure the built in <strong>ValueListServiceController</strong>.
							This will need to know the default <strong>page</strong>, <strong>numberPerPage</strong>, and <strong>valueListQuery</strong> params to use.
						</p>
						<p>
							Here is my valuelist_config.js file. You may need to adjust yours to suit your needs.
						</p>
						<p>
							<div class="code">
								<pre>
									<code>
angular.module('valueList').config(function(valueListServiceProvider){
    valueListServiceProvider.setBaseUrl("http://localhost:8080/valueslistservice/values");
}).value("defaultParams",{page:1, numberPerPage:15, valueListQuery: 'query'});									
									</code>
								</pre>
							</div>
						</p>
						<h4><strong>Creating a Basic Table</strong></h4>
						<p>
							Now, lets put a simple table on our page. My query returns values with the properties emp_no, first_name, last_name, gender, birth_date, and hire_date.
							As you can see, my table is modeled accordingly. Put the following inside of the div that references the controller,adjusting the table headers
							and row definitions to match your JSON response.
						</p>
						<p>
							<div class="code" ng-non-bindable>
								<pre>
									<code>
&lt;button ng-click=&quot;getValues()&quot;&gt;Load Results&lt;/button&gt;
&lt;table&gt;
    &lt;tbody&gt;
    &lt;tr&gt;
        &lt;th&gt;Employee Number&lt;/th&gt;
        &lt;th&gt;First Name&lt;/th&gt;
        &lt;th&gt;Last Name&lt;/th&gt;
        &lt;th&gt;Birth Date&lt;/th&gt;
        &lt;th&gt;Gender&lt;/th&gt;
        &lt;th&gt;Hire Date&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr ng-repeat=&quot;value in results.values&quot;&gt;
        &lt;td&gt;{{ value.emp_no }}&lt;/td&gt;
        &lt;td&gt;{{ value.first_name }}&lt;/td&gt;
        &lt;td&gt;{{ value.last_name}}&lt;/td&gt;
        &lt;td&gt;{{ value.birth_date}}&lt;/td&gt;
        &lt;td&gt;{{ value.gender}}&lt;/td&gt;
        &lt;td&gt;{{ value.hire_date }}&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
									</code>
								</pre>
							</div>
							</p>
							<p>
								After clicking the button, you will have a table which is displaying the results of your XML query from the back-end. This happens
								when ng-click tells the scope to call <strong>getValues</strong>, which loads the results from the service into the controller's model.
								Notice how each result from your query is put into <strong>results.values</strong>.
							</p>
							<h4><strong>Adding Form Parameters</strong></h4>
							<p>
								The next logical step would be allowing the user to enter parameters into a form.
								The <strong>ValueListServiceController</strong> supports forms easily. Lets make a simple form on our page.
								My form will give the user the option to enter either the first name, or the last name, which correspond to first_name and
								last_name parameters in my SQL.
							</p>
							<p>
								<div class="code">
									<pre>
										<code>
&lt;form&gt;
    &lt;label&gt;First Name: &lt;/label&gt;&lt;input type=&quot;text&quot; ng-model=&quot;queryParams.first_name&quot;/&gt;
    &lt;label&gt;Last Name: &lt;/label&gt;&lt;input type=&quot;text&quot; ng-model=&quot;queryParams.last_name&quot;/&gt;
&lt;/form&gt;
										</code>
									</pre>
								</div>
							</p>
							<p>
								The important thing to notice here is the <strong>ng-model</strong> attribute on the form element.
								This binds the input value to <strong>queryParams</strong> properties. Note that in order for the queries to 
								be passed the parameter from the input element, the ng-bind attribute must be set to <strong>queryParams.&lt;your_parameter_name&gt;</strong>
							</p>
							<p>
								In this way, assuming that your SQL configured in the back-end takes advantage of the new parameters, the user can now enter search parameters.
							</p>
							<p>
								Here is what my example looks like when the user enters "Georgi" for the first name.</br>
								<div class="code">
									<img src="images/table_with_parameters.JPG" style="height:402px;width:540px"/>
								</div>
							</p>
							<h4><strong>Paging</strong></h4>
							<p>
								Fortunately, valuelist.js also supports paging out of the box with <strong>ValueListServiceController</strong>.
								Lets add buttons in at the bottom of the table to page through our results. After all, paging support is one of the
								primary reasons to use the back-end we are using.
							</p>
							<p>
								Add the following html after the closing table element.
							</p>
							<p>
								<div class="code">
									<pre>
										<code>
&lt;button ng-click=&quot;backPage()&quot;&gt;Back&lt;/button&gt;
&lt;button ng-click=&quot;nextPage()&quot;&gt;Next&lt;/button&gt;
										</code>
									</pre>
								</div>
							</p>
							<p>
								Just like that, the user can page through the results of the query. The controller manages
								the page the user is on. If you would like to allow more control over paging yourself, simply bind an input to
								<strong>queryParams.page</strong> or <strong>queryParams.numberPerPage</strong>, or manually set those values.
							</p>
							<h4><strong>Sorting</strong></h4>
							<p>
								Sorting results is also extremely easy with <strong>ValueListServiceController</strong>, simply call a function from the controller.
							</p>
							<p>
								Add the following buttons in html (or something similar), which will call the controller's sort function. 
								I will allow my user to sort by Employee Number, either ascending or descending.
							</p>
							<p>
								<div class="code">
									<pre>
										<code>
&lt;button ng-click=&quot;sort('emp_no','asc')&quot;&gt;Sort employees asc&lt;/button&gt;
&lt;button ng-click=&quot;sort('emp_no','desc')&quot;&gt;Sort employees desc&lt;/button&gt;										
										</code>
									</pre>
								</div>
							</p>
							<p>
								Note that once the sorting parameters are applied, they will remain on the queryParams until they are changed or removed.
							</p>
							<h4><strong>Error Handling</strong></h4>
							<p>
								One of the nicest things about the Java side of this project is that when it is deployed in a web project
								you will get nice JSON error responses that you can display to your user. One common area where this is useful is conversion errors.
								Lets say you have a field for a user to enter a date in the form YYYY-MM-DD. Likely you have also configured the back end to convert
								that date into a java.util.Date before running the query against the database.
							</p>
							<p>
								In this situation, if the user were to enter something like 'today' into the date field, this would throw a ConversionException
								on the server side, and the response from the server would include the JSON error messages. Lets see how we can use this to
								display error messages.
							</p>
							<p>
								I will add an input for date, and a span to bind to the error message, if it is present.
							</p>
							<p>
								<div class="code">
									<pre>
										<code>
&lt;label&gt;Hire Date: &lt;/label&gt;&lt;input type=&quot;text&quot; ng-model=&quot;queryParams.hire_date&quot; placeholder=&quot;YYYY-MM-DD&quot;/&gt;
&lt;span ng-hide=&quot;results.errorData.hire_date == undefined&quot; ng-bind=&quot;results.errorData.hire_date.simple_message&quot;&gt;&lt;/span&gt;
										</code>
									</pre>
								</div>
							</p>
							<p>
								Note, any conversion error can be retrieved by using <strong>results.errorData.&lt;your_parameter_name&gt;</strong>.
							</p>
						<div class="back_footer" ng-click="currentPageName = 'UsingInSpringMVC'">
							Using ValueListService in a Spring MVC Project
						</div>
						</div>
					</p>
				</div>
			</div>
		</div>
	</div>
		<div class="clear">
			<hr />
		</div>
		<div id="footer">
			<div class="footer_text">
				Copyright &#169; 2016. All Rights Reserved.
			</div>
			<div class="clear">
				<hr />
			</div>
		</div>
	</div>
	<!-- angular imports -->
	<script src="js/angular.min.js"></script>
	<script src="js/app.js"></script>
</body>
</html>
